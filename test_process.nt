// Test Erlang-style process system
use process;

// Simple test: spawn a process that receives a message
fun worker() {
    say("Worker waiting for message...");
    var msg = process.receive();
    say("Worker received: " + msg);
    return msg * 2;
}

// Test self() 
var my_pid = process.self();
say("Main process PID: " + my_pid);

// Spawn a worker process
var worker_pid = process.spawn(worker);
say("Spawned worker with PID: " + worker_pid);

// Send a message to the worker
process.send(worker_pid, 21);
say("Sent message 21 to worker");

// Give time for worker to process
process.process_sleep(200);

say("Process test completed!");
