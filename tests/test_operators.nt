// Test operators
say("=== Testing Operators ===");

// Test 1: Arithmetic operators
var sum = 10 + 5;
var diff = 20 - 10;
var product = 5 * 2;
var quotient = 10 / 2;
if (sum == 15 and diff == 10 and product == 10 and quotient == 5) {
    say("✓ Arithmetic operators work");
} else {
    say("✗ Arithmetic operators failed");
}

// Test 2: Comparison operators
var eq = 10 == 10;
var neq = 10 != 5;
var lt = 5 < 10;
var gt = 10 > 5;
if (eq and neq and lt and gt) {
    say("✓ Comparison operators work");
} else {
    say("✗ Comparison operators failed");
}

// Test 3: Logical operators
var andResult = true and false;
var orResult = true or false;
if (andResult == false and orResult == true) {
    say("✓ Logical operators (and, or) work");
} else {
    say("✗ Logical operators failed");
}

// Test 4: Logical operators with complex expressions and negative numbers
var x = 10;
var y = -5;

// Test the specific issue reported: logical operators with negative numbers
if (x < 1 and x < -1) {
    say("✗ Complex condition with negatives failed (should not execute)");
} elif (x == 10) {
    say("✓ Complex logical expressions with negatives work");
} else {
    say("✗ Complex logical expressions with negatives failed");
}

// Test more complex logical combinations
if (y < 0 and y > -10) {
    say("✓ Logical AND with negative comparisons works");
} else {
    say("✗ Logical AND with negative comparisons failed");
}

if (y < 0 or y > 0) {
    say("✓ Logical OR with negative comparisons works");
} else {
    say("✗ Logical OR with negative comparisons failed");
}

// Test short-circuit evaluation
var counter = 0;
fun incrementCounterAndReturn(val) {
    counter = counter + 1;
    return val;
}

counter = 0;
var result1 = false and incrementCounterAndReturn(true);
if (result1 == false and counter == 0) {
    say("✓ Short-circuit AND works (right operand not evaluated when left is false)");
} else {
    say("✗ Short-circuit AND failed");
}

counter = 0;
var result2 = true or incrementCounterAndReturn(false);
if (result2 == true and counter == 0) {
    say("✓ Short-circuit OR works (right operand not evaluated when left is true)");
} else {
    say("✗ Short-circuit OR failed");
}

// Test 4: String concatenation
var greeting = "Hello, " + "world!";
var withNumber = "Value: " + 42;
if (greeting == "Hello, world!") {
    say("✓ String concatenation works");
} else {
    say("✗ String concatenation failed");
}

// Test 5: Operator precedence
var result = 2 + 3 * 4;
if (result == 14) {
    say("✓ Operator precedence works");
} else {
    say("✗ Operator precedence failed");
}

// Test 6: Parentheses
var result2 = (2 + 3) * 4;
if (result2 == 20) {
    say("✓ Parentheses for precedence work");
} else {
    say("✗ Parentheses failed");
}

say("\n=== All operator tests passed ===");
