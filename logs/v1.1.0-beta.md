# Neutron v1.1.0_beta Release Notes

**Release Date:** October 22, 2025  
**Version:** 1.1.0_beta  
**Codename:** Dynamic Conversion

## Overview

Neutron v1.1.0_beta introduces the enhanced fmt module with dynamic type conversion capabilities and improved type safety. This release replaces the older convert module with a more powerful and flexible type conversion system, plus critical build system improvements.

## üöÄ New Features

### Arrays Module (Standalone)
- **arrays.new()** - Create new empty array
- **arrays.length(array)** - Get array length
- **arrays.push(array, value)** - Add element to end
- **arrays.pop(array)** - Remove and return last element
- **arrays.at(array, index)** - Get element at index
- **arrays.set(array, index, value)** - Set element at index
- **arrays.slice(array, start, end)** - Create subarray
- **arrays.join(array, separator)** - Join elements to string
- **arrays.reverse(array)** - Reverse array in place
- **arrays.sort(array)** - Sort array in place
- **arrays.index_of(array, value)** - Find first occurrence index
- **arrays.contains(array, value)** - Check if element exists
- **arrays.remove(array, value)** - Remove first occurrence
- **arrays.remove_at(array, index)** - Remove element at index
- **arrays.clear(array)** - Remove all elements
- **arrays.clone(array)** - Create shallow copy
- **arrays.to_string(array)** - Convert to string representation
- **arrays.flat(array)** - Flatten nested arrays
- **arrays.fill(array, value, start, end)** - Fill with value
- **arrays.range(start, end, step)** - Create range array
- **arrays.shuffle(array)** - Randomly shuffle elements

### Dynamic Type Conversion Module (fmt)
- **fmt.to_int(value)** - Dynamic integer conversion from any supported type
  - Converts numbers, strings, booleans, nil values
  - Truncates decimal parts for float-to-int conversion
  - Throws errors for unsupported types (arrays, objects, functions)

- **fmt.to_str(value)** - Dynamic string conversion from any supported type  
  - Converts numbers to string representations
  - Converts booleans to "true"/"false" strings
  - Converts nil to "nil" string
  - Throws errors for complex types

- **fmt.to_bin(value)** - Dynamic binary conversion from any supported type
  - Converts numbers to binary string representations (without leading zeros)
  - Converts string numbers to binary (parses first, then converts)
  - Boolean support (true ‚Üí "1", false ‚Üí "0")
  - Throws errors for unsupported types

- **fmt.to_float(value)** - Dynamic float conversion with decimal precision
  - Maintains decimal precision for number types
  - Parses string representations to float values
  - Boolean support (true ‚Üí 1.0, false ‚Üí 0.0)
  - Enhanced for scientific and financial calculations

- **fmt.type(value)** - Runtime type detection
  - Returns type name as string ("nil", "bool", "number", "string", "function", "object", "array", "module")
  - Enhanced for dynamic behavior based on runtime types

### Enhanced Type Safety
- Strict compile-time type checking for variable assignments
- Detailed error messages with line and column information
- Type annotation enforcement prevents runtime type mismatches

## üîß Improvements

### Build System
- Fixed unused variable warnings in VM bytecode symbols
- Fixed sign comparison warnings in arrays module
- Fixed unused parameter warnings in native functions
- Improved CMake build configuration for cleaner compilation

### Module System
- Replaced convert module with enhanced fmt module
- Dynamic type detection enables flexible value processing
- Better error handling with descriptive error messages
- Performance improvements for type conversion operations

### Documentation
- New comprehensive fmt module documentation
- Updated module references in main documentation
- Enhanced examples and usage patterns
- Migration guide from convert to fmt module

## üìö Usage Examples

### Basic Type Conversion
```neutron
use fmt;

// Integer conversion
var int1 = fmt.to_int(42.7);      // 42
var int2 = fmt.to_int("123");     // 123
var int3 = fmt.to_int(true);      // 1

// String conversion
var str1 = fmt.to_str(42);        // "42"
var str2 = fmt.to_str(true);      // "true"
var str3 = fmt.to_str(nil);       // "nil"

// Binary conversion
var bin1 = fmt.to_bin(10);        // "1010"
var bin2 = fmt.to_bin("5");       // "101"
var bin3 = fmt.to_bin(false);     // "0"

// Float conversion
var float1 = fmt.to_float(42);    // 42.0
var float2 = fmt.to_float("3.14"); // 3.14
var float3 = fmt.to_float(true);  // 1.0

// Type detection
var type = fmt.type(42);          // "number"
```

### Dynamic Processing
```neutron
use fmt;

fun processValue(input) {
    var inputType = fmt.type(input);
    say("Processing " + inputType + " value: " + fmt.to_str(input));
    
    // Convert to required type
    try {
        var num = fmt.to_float(input);
        say("As number: " + num);
    } catch (error) {
        say("Cannot convert to number: " + error);
    }
}

processValue(42);         // Number processing
processValue("123");      // String number processing
processValue(true);       // Boolean processing
```

## üîÑ Migration Guide

### From Convert to Fmt Module

**Old (convert module):**
```neutron
use convert;
var result = convert.int("123");     // String to int
var str = convert.str(42);           // Number to string
```

**New (fmt module):**
```neutron
use fmt;
var result = fmt.to_int("123");      // Dynamic int conversion
var str = fmt.to_str(42);            // Dynamic string conversion
var bin = fmt.to_bin(10);            // Dynamic binary conversion
var floatVal = fmt.to_float("3.14"); // Dynamic float conversion
var type = fmt.type(42);             // Type detection
```

## üß™ Testing

- All 27 existing tests continue to pass
- New comprehensive test suite for fmt module functions
- Type safety validation tests
- Error handling verification
- Performance benchmarking

## üìÅ File Changes

### Added
- `libs/fmt/` - New fmt module implementation
- `docs/modules/fmt_module.md` - Comprehensive documentation
- New test cases for type conversion functions

### Modified  
- `docs/modules/README.md` - Updated module references
- `CMakeLists.txt` - Build system updates
- `vm.cpp` - Module loading updates and unused variable fixes
- `libs/arrays/native.cpp` - Fixed sign comparison and parameter warnings
- `CHANGELOG.md` - Release notes

### Removed
- Character manipulation functions from convert module (moved to sys module)

## ‚ö° Performance Notes

- Dynamic type conversion optimized for common use cases
- Runtime type detection efficient for hot code paths
- Memory usage comparable to previous convert module
- No performance regression in existing functionality

## üîÑ Known Issues

- Type conversion errors for complex structures (arrays, objects) as designed
- String-to-number parsing follows standard numeric parsing rules
- Binary conversion returns string without leading zeros

## üôè Acknowledgments

Thanks to the Neutron community for feedback on type safety and conversion functionality requirements.

## üîó Links

- [Fmt Module Documentation](../docs/modules/fmt_module.md)
- [Migration Guide](../docs/migration_guide.md) 
- [API Reference](../docs/api_reference.md)

---
*Released by the Neutron Development Team*  
*Build: v1.1.0_beta | Platform: Cross-platform | Date: 2025-10-22*